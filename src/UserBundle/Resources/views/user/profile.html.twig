{% extends 'AvanzuAdminThemeBundle:layout:base-layout.html.twig' %}

{% block title %}{{"profile"|trans }}{% endblock title %}

{% block page_content %}

<div class="box box-widget widget-user">
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-light-blue">
              <h3 class="widget-user-username">{{ user.firstName }} {{ user.lastName }}</h3>
              <h5 class="widget-user-desc"></h5>
            </div>
            <div class="widget-user-image">
              <img class="img-circle" src="../dist/img/user1-128x128.jpg" alt="User Avatar">
            </div>
            <div class="box-footer">
              <div class="row">
                <div class="col-sm-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header">3,200</h5>
                    <span class="description-text">SALES</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-sm-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header">13,000</h5>
                    <span class="description-text">FOLLOWERS</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-sm-4">
                  <div class="description-block">
                    <h5 class="description-header">{{ user.friends|length }}</h5>
                    <span class="description-text">FRIENDS</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
              </div>
              <!-- /.row -->
            </div>
          </div>
{% if friend == 'no' %}
              <button data-url="{{ path('add_friend',{'user_id':user.id}) }}" class="btn btn-primary" id="add_friend">
              {{ 'add_friend'|trans }}</button>
               {% else %}
               <button data-url="{{ path('remove_friend',{'user_id':user.id}) }}" class="btn btn-primary" id="remove_friend">
               {{ 'remove_friend'|trans }}</button>
               {% endif %}

{% endblock page_content %}

{% block javascripts %}
{{ parent() }}
<script>
$('#add_friend').click(function(){
	var url = $(this).attr('data-url');
    $.ajax({
        type : 'POST',
        url : url,
        dataType : 'json',
        data: {},
        success : function(data){
            location.reload();
        }
    });
});

$('#remove_friend').click(function(){
	var url = $(this).attr('data-url');
    $.ajax({
        type : 'POST',
        url : url,
        dataType : 'json',
        data: {},
        success : function(data){
            location.reload();
        }
    });
});

</script>
{% endblock javascripts %}